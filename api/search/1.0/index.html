<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <title>
    Content Search API 1.0 Documentation &mdash; IIIF | International Image Interoperability Framework
  </title>
  <meta name="description" content="">
  <link rel="shortcut icon" href="/iiif-website/assets/images/logo-sm.png">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/iiif-website/assets/css/style.css"></head>
<body>







<section class="hero is-primary" style="">
  
  <div class="hero-head">
    <nav id="navbar" class="navbar is-transparent is-spaced">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/iiif-website/">
        <img src="/iiif-website/assets/images/logo-sm.png" alt="International Image Interoperability Framework logo" height="28">
        <span class="brand-title">International Image Interoperability Framework</span>
      </a>
      <div class="navbar-burger" data-target="navbar" onclick="document.querySelector('.navbar-menu').classList.toggle('is-active');">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <div class="navbar-menu">
      <div class="navbar-end">
            <a class="navbar-item" href="/iiif-website/">Home</a>
          
            <a class="navbar-item" href="/iiif-website/demos">Demos</a>
          
            <a class="navbar-item" href="/iiif-website/news-and-events">News & Events</a>
          
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link"href="/iiif-website/get-involved">
                Get Involved
              </a>
              <div class="navbar-dropdown is-boxed is-active">
                
                  <a class="navbar-item" href="/iiif-website">Community Groups</a>
                
                  <a class="navbar-item" href="/iiif-website">Consortium</a>
                
                  <a class="navbar-item" href="/iiif-website">Join Newsletter</a>
                
                  <a class="navbar-item" href="/iiif-website">Contact Us</a>
                
              </div>
            </div>
          
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link"href="/iiif-website/get-started">
                Get Started
              </a>
              <div class="navbar-dropdown is-boxed is-active">
                
                  <a class="navbar-item" href="/iiif-website">How It Works</a>
                
                  <a class="navbar-item" href="/iiif-website/api">APIs & Documentation</a>
                
                  <a class="navbar-item" href="/iiif-website">Cookbooks</a>
                
                  <a class="navbar-item" href="/iiif-website">Training</a>
                
              </div>
            </div>
          </div>
    </div>
  </div>
</nav>

  </div>
  

  <div class="hero-body container">

    
    <nav class="breadcrumb is-centered" aria-label="breadcrumbs">
      <ul>
        
          <li><a href="/iiif-website/get-started">Get Started</a></li>
        
          <li><a href="/iiif-website/api">APIs & Documentation</a></li>
        
      </ul>
    </nav>
    

    <div class="container has-text-centered">
      
      <h1 class="title is-size-2 is-size-3-mobile is-size-desktop is-size-1-widescreen">Content Search API 1.0 Documentation</h1>
      
      <p class="subtitle is-size-5"></p>

      
    </div>
  </div>
</section>
<section id="main">
      

<div class="container-block is-max-widescreen">
  <div class="columns container">
    <aside class="column is-one-third" markdown="1">
      <div class="box toc-sidebar sticky">
        <ul class="menu" id="toc-menu"><li><a href="#introduction">1. Introduction</a><ul class="menu-list toc-submenu-2"><li><a href="#use-cases">1.1. Use Cases</a></li><li><a href="#terminology">1.2. Terminology</a></li></ul></li><li><a href="#overview">2. Overview</a></li><li><a href="#search">3. Search</a><ul class="menu-list toc-submenu-2"><li><a href="#service-description">3.1. Service Description</a></li><li><a href="#request-1">3.2. Request</a></li><li><a href="#presentation-api-compatible-responses">3.3. Presentation API Compatible Responses</a></li><li><a href="#search-api-specific-responses">3.4 Search API Specific Responses</a></li></ul></li><li><a href="#autocomplete">4. Autocomplete</a><ul class="menu-list toc-submenu-2"><li><a href="#service-description-1">4.1. Service Description</a></li><li><a href="#request">4.2. Request</a></li><li><a href="#response">4.3. Response</a></li></ul></li><li><a href="#property-definitions">5. Property Definitions</a></li><li><a href="#appendices">Appendices</a><ul class="menu-list toc-submenu-2"><li><a href="#a-request-parameter-requirements">A. Request Parameter Requirements</a></li><li><a href="#b-versioning">B. Versioning</a></li><li><a href="#c-acknowledgements">C. Acknowledgements</a></li><li><a href="#d-change-log">D. Change Log</a></li></ul></li></ul>

      </div>
    </aside>
    <div class="column content is-two-thirds api-content" markdown="1">
      <h2 class="no_toc" id="status-of-this-document">
        
        
          Status of this Document <a href="#status-of-this-document">#</a>
        
        
      </h2>
    
<p><strong>This Version:</strong> 1.0.0</p>

<p><strong>Latest Stable Version:</strong> <a href="/iiif-website/api/search/./" title="Stable Version">..</a></p>

<p><strong>Editors</strong></p>

<ul>
  <li>
    <p><strong><a href="https://orcid.org/0000-0002-1266-298X">Michael Appleby</a></strong>, Yale University</p>
  </li>
  <li>
    <p><strong><a href="https://orcid.org/0000-0003-1881-243X">Tom Crane</a></strong>, Digirati</p>
  </li>
  <li>
    <p><strong><a href="https://orcid.org/0000-0003-4441-6852">Robert Sanderson</a></strong>, J. Paul Getty Trust</p>
  </li>
  <li>
    <p><strong><a href="https://orcid.org/0000-0002-0367-1243">Jon Stroop</a></strong>, Princeton University Library</p>
  </li>
  <li>
    <p><strong><a href="https://orcid.org/0000-0002-7970-7855">Simeon Warner</a></strong>, Cornell University</p>
  </li>
</ul>

<p><em>Copyright © 2015-2021 Editors and contributors. Published by the IIIF Consortium under the <a href="http://creativecommons.org/licenses/by/4.0/" title="Creative Commons &mdash; Attribution 4.0 International">CC-BY</a> license, see <a href="/iiif-website/api/annex/notes/disclaimer/">disclaimer</a>.</em></p><hr />
      <h2 id="introduction">
        
        
          1. Introduction <a href="#introduction">#</a>
        
        
      </h2>
    

<p>In the IIIF (pronounced “Triple-Eye-Eff”) <a href="/iiif-website/api/presentation/./" title="Presentation API">Presentation API</a>, content is brought together from distributed systems via annotations.  That content might include images, often with a IIIF <a href="/iiif-website/api/image/./" title="Image API">Image API</a> service to access them, audio, video, rich or plain text, or anything else.  In a vibrant and dynamic system, that content can come from many sources and be rich, varied and abundant.  Of that list of content types, textual resources lend themselves to being searched, either as the transcription, translation or edition of the intellectual content, or commentary, description, tagging or other annotations about the object.</p>

<p>This specification lays out the interoperability mechanism for performing these searches within the IIIF context.  The scope of the specification is searching annotation content within a single IIIF resource, such as a Manifest, Range or Collection.  Every effort is made to keep the interaction as consistent with existing IIIF patterns as possible.  Searching for metadata or other descriptive properties is <strong>not</strong> in scope for this work.</p>

<p>In order to make searches easier against unknown content, a related service for the auto-completion of search terms is also specified. The auto-complete service is specific to a search service to ensure that the retrieved terms can simply be copied to the query of the search.</p>

<p>Please send feedback to <a href="mailto:iiif-discuss@googlegroups.com" title="Email Discussion List">iiif-discuss@googlegroups.com</a></p>
      <h3 id="use-cases">
        
        
          1.1. Use Cases <a href="#use-cases">#</a>
        
        
      </h3>
    

<p>Use cases for being able to search the annotations within the Presentation API include:</p>

<ul>
  <li>Searching OCR generated text to find words or phrases within a book, newspaper or other primarily textual content.</li>
  <li>Searching transcribed content, provided by crowd-sourcing or transformation of scholarly output.</li>
  <li>Searching multiple streams of content, such as the translation or edition, rather than the raw transcription of the content, to jump to the appropriate part of an object.</li>
  <li>Searching on sections of text, such as defined chapters or articles.</li>
  <li>Searching for user provided commentary about the resource, either as a discovery mechanism for the resource or for the discussion.</li>
  <li>Discovering similar sections of text to compare either the content or the object.</li>
</ul>

<p>User interfaces that could be built using the search response include highlighting matching words in the display, providing a heatmap of where the matches occur within the object, and providing a mechanism to jump between points within the object.  The auto-complete service assists users in identifying terms that exist within the selected scope.</p>
      <h3 id="terminology">
        
        
          1.2. Terminology <a href="#terminology">#</a>
        
        
      </h3>
    

<p>The key words <em class="rfc">must</em>, <em class="rfc">must not</em>, <em class="rfc">required</em>, <em class="rfc">shall</em>, <em class="rfc">shall not</em>, <em class="rfc">should</em>, <em class="rfc">should not</em>, <em class="rfc">recommended</em>, <em class="rfc">may</em>, and <em class="rfc">optional</em> in this document are to be interpreted as described in <a href="http://tools.ietf.org/html/rfc2119">RFC 2119</a>.</p>
      <h2 id="overview">
        
        
          2. Overview <a href="#overview">#</a>
        
        
      </h2>
    

<p>The IIIF <a href="/iiif-website/api/presentation/./" title="Presentation API">Presentation API</a> provides just enough information to a viewer so that it can present the images and other content to the user in a rich and understandable way.  Those content resources may have textual annotations associated with them.  Annotations may also be associated with the structural components of the Presentation API, such as the manifest itself, sequences, ranges, and layers.  Further, annotations can be replied to by annotating them to form a threaded discussion about the commentary, transcription, edition or translation.</p>

<p>Annotations are typically made available to viewing applications in an annotation list, where all of the annotations in the list target the same resource, or part of it.  Where known, these lists can be directly referenced from the manifest document to allow clients to simply follow the link to retrieve them.  For fixed, curated content, this is an appropriate method to discover them, as the annotations do not frequently change, nor are they potentially distributed amongst multiple servers. Annotation lists can be included in layers to group them together, such as by the source of the annotations, to allow the user to manipulate that grouping as a whole.</p>

<p>However this is less useful for comment-style annotations, crowd-sourced or distributed transcriptions, corrections to automated OCR transcription, and similar, as the annotations may be in constant flux.  Further, being able to quickly discover individual annotations without stepping through all of the views of an object is essential for a reasonable user experience.  This specification adds this capability to the IIIF suite of specifications.</p>

<p>Beyond the ability to search for words or phrases, users find it helpful to have suggestions for what terms they should be searching for.  This facility is often called auto-complete or type-ahead, and within the context of a single object can provide insight into the language and content.  The auto-complete service is associated with a search service into which the terms can be fed as part of a query.</p>
      <h2 id="search">
        
        
          3. Search <a href="#search">#</a>
        
        
      </h2>
    

<p>The search service takes a query, including typically a search term or URI, and potentially filtering further by other properties including the date the annotation was created or last modified, the motivation for the annotation, or the user that created the annotation.</p>
      <h3 id="service-description">
        
        
          3.1. Service Description <a href="#service-description">#</a>
        
        
      </h3>
    

<p>Any resource in the Presentation API may have a search service associated with it.  The resource determines the scope of the content that will be searched.  A service associated with a manifest will search all of the annotations on canvases or other objects below the manifest, a service associated with a particular range will only search the canvases within the range, or a service on a canvas will search only annotations on that particular canvas.</p>

<p>The description of the service follows the pattern established in the <a href="/iiif-website/api/annex/services/">Linking to Services</a> specification.  The description block <em class="rfc">must</em> have the <code class="language-plaintext highlighter-rouge">@context</code> property with the value “http://iiif.io/api/search/1/context.json”, the  <code class="language-plaintext highlighter-rouge">profile</code> property with the value “http://iiif.io/api/search/1/search”, and the <code class="language-plaintext highlighter-rouge">@id</code> property that contains the URI where the search can be performed.</p>

<p>An example service description block:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="c1">// ... the resource that the search service is associated with ...</span><span class="w">
  </span><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/services/identifier/search"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iiif.io/api/search/1/search"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h3 id="request-1">
        
        
          3.2. Request <a href="#request-1">#</a>
        
        
      </h3>
    

<p>The search request is made to a service that is related to a particular Presentation API resource.  The URIs for services associated with different resources must be different to allow the client to use the correct one for the desired scope of the search.  To perform a search, the client <em class="rfc">must</em> use HTTP GET (rather than POST) to make the request to the service, with query parameters to specify the search terms.</p>
      <h4 id="query-parameters">
        
        
          3.2.1. Query Parameters <a href="#query-parameters">#</a>
        
        
      </h4>
    

<p>Other than <code class="language-plaintext highlighter-rouge">q</code>, which is <em class="rfc">recommended</em>, all other parameters are <em class="rfc">optional</em> in the request.  The default, if a parameter is empty or not supplied, is to not restrict the annotations that match the search by that parameter.  If the value is supplied but the field is not present in an annotation, then the search does not match that annotation. For example if an annotation does not have a creator, and the query specifies a <code class="language-plaintext highlighter-rouge">user</code> parameter, then the annotation does not match the query.</p>

<p>Servers <em class="rfc">should</em> implement the <code class="language-plaintext highlighter-rouge">q</code> and <code class="language-plaintext highlighter-rouge">motivation</code> parameters and <em class="rfc">may</em> implement the other parameters. Parameters that are received in a request but not implemented <em class="rfc">must</em> be ignored, and <em class="rfc">should</em> be included in the <code class="language-plaintext highlighter-rouge">ignored</code> property of the Layer in the response, described <a href="#ignored-parameters">below</a>.</p>

<table class="api-table">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">q</code></td>
      <td>A space separated list of search terms. The search terms <em class="rfc">may</em> be either words (to search for within textual bodies) or URIs (to search identities of annotation body resources).  The semantics of multiple, space separated terms is server implementation dependent.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">motivation</code></td>
      <td>A space separated list of motivation terms. If multiple motivations are supplied, an annotation matches the search if any of the motivations are present. Expected values are given below.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">date</code></td>
      <td>A space separated list of date ranges.  An annotation matches if the date on which it was created falls within any of the supplied date ranges. The dates <em class="rfc">must</em> be supplied in the ISO8601 format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DDThh:mm:ssZ/YYYY-MM-DDThh:mm:ssZ</code>. The dates <em class="rfc">must</em> be expressed in UTC and <em class="rfc">must</em> be given in the <code class="language-plaintext highlighter-rouge">Z</code> based format.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">user</code></td>
      <td>A space separated list of URIs that are the identities of users. If multiple users are supplied, an annotation matches the search if any of the users created the annotation.</td>
    </tr>
  </tbody>
</table>

<p>Common values for the motivation parameter are:</p>

<table class="api-table">
  <thead>
    <tr>
      <th>Motivation</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">painting</code></td>
      <td>Only annotations with the <code class="language-plaintext highlighter-rouge">sc:painting</code> motivation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">non-painting</code></td>
      <td>Annotations with any motivation other than <code class="language-plaintext highlighter-rouge">sc:painting</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">commenting</code></td>
      <td>Annotations with the <code class="language-plaintext highlighter-rouge">oa:commenting</code> motivation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">describing</code></td>
      <td>Annotations with the <code class="language-plaintext highlighter-rouge">oa:describing</code> motivation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tagging</code></td>
      <td>Annotations with the <code class="language-plaintext highlighter-rouge">oa:tagging</code> motivation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">linking</code></td>
      <td>Annotations with the <code class="language-plaintext highlighter-rouge">oa:linking</code> motivation</td>
    </tr>
  </tbody>
</table>

<p>Other motivations are possible, and the full list from the <a href="http://www.openannotation.org/spec/core/" title="Open Annotation">Open Annotation</a> specification <em class="rfc">should</em> be available by dropping the “oa:” prefix.  Other, community specific motivations <em class="rfc">should</em> include a prefix or use their full URI.</p>
      <h4 id="example-request">
        
        
          3.2.2. Example Request <a href="#example-request">#</a>
        
        
      </h4>
    

<p>This example request:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-plaintext urltemplate highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.org/services/manifest/search?q=bird&amp;motivation=painting
</code></pre></div></div>

<p>Would search for annotations with the word “bird” in their textual content, and have the motivation of <code class="language-plaintext highlighter-rouge">painting</code>.  It would search annotations within the resource the service was associated with.</p>
      <h3 id="presentation-api-compatible-responses">
        
        
          3.3. Presentation API Compatible Responses <a href="#presentation-api-compatible-responses">#</a>
        
        
      </h3>
    

<p>The response from the server is an <a href="/iiif-website/api/presentation/./#annotation-list">annotation list</a>, following the format from the Presentation API with a few additional features.  This allows clients that already implement the AnnotationList format to avoid further implementation work to support search results.</p>

<p>The search results are returned as annotations in the regular IIIF syntax. Note that the annotations can come from multiple canvases, rather than the default situation from the Presentation API where all of the annotations target a single canvas.</p>
      <h4 id="simple-lists">
        
        
          3.3.1. Simple Lists <a href="#simple-lists">#</a>
        
        
      </h4>
    

<p>The simplest response looks exactly like a regular annotation list, where all of the matching annotations are returned in a single response. The value of <code class="language-plaintext highlighter-rouge">@id</code> will be the same as the URI used in the query, however servers <em class="rfc">may</em> drop query parameters that are ignored so long as they are reported in the <code class="language-plaintext highlighter-rouge">ignored</code> property.</p>

<p>Clients wishing to know the total number of annotations that match may count the number of annotations in the <code class="language-plaintext highlighter-rouge">resources</code> property, as all matches have been returned.  The full annotation description <em class="rfc">must</em> be included in the response, even if the annotations are separately dereferenceable via their URIs.</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:</span><span class="s2">"http://iiif.io/api/presentation//context.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=bird&amp;motivation=painting"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno-line"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"motivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:painting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnt:ContentAsText"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chars"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A bird in the hand is worth two in the bush"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/canvas1#xywh=100,100,250,20"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further matching annotations here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h4 id="paging-results">
        
        
          3.3.2. Paging Results <a href="#paging-results">#</a>
        
        
      </h4>
    

<p>For long lists of annotations, the server may choose to divide the response into multiple sections, often called pages.  Each page is an annotation list and can refer to other pages to allow the client to traverse the entire set.  This uses the <a href="/iiif-website/api/presentation/2.1/">paging features</a> introduced in version 2.1 of the Presentation API, but is backwards compatible with version 2.0.  The next page of results that follows the current response <em class="rfc">must</em> be referenced in a <code class="language-plaintext highlighter-rouge">next</code> property of the annotation list, and the previous page <em class="rfc">should</em> be referenced in a <code class="language-plaintext highlighter-rouge">prev</code> property.</p>

<p>The URI of the first annotation list reported in the <code class="language-plaintext highlighter-rouge">@id</code> property <em class="rfc">may</em> be different from the one used by the client to request the search.  Each page <em class="rfc">should</em> also have a <code class="language-plaintext highlighter-rouge">startIndex</code> property with an integer value that reports the position of the first result within the entire result set, where the first annotation has an index of 0.  For example, if the client has requested the first page which has 10 hits, then the <code class="language-plaintext highlighter-rouge">startIndex</code> will be 0, and the <code class="language-plaintext highlighter-rouge">startIndex</code> of second page will be 10, being the 11th hit.</p>

<p>All of the pages are within a <a href="/iiif-website/api/presentation/./#layer">layer</a> that represents the entire resultset of matched annotations.  The layer is the value of a <code class="language-plaintext highlighter-rouge">within</code> property on each of the page annotation lists, and is recorded as an object with properties.</p>

<p>The layer <em class="rfc">must</em> have the <code class="language-plaintext highlighter-rouge">@type</code> property, with the value of “sc:Layer”.  It <em class="rfc">should</em> refer to the URIs of the first and last annotation list pages with <code class="language-plaintext highlighter-rouge">first</code> and <code class="language-plaintext highlighter-rouge">last</code> properties, respectively. The layer <em class="rfc">should</em> have a <code class="language-plaintext highlighter-rouge">total</code> property which is the total number of hits generated by the query, and it <em class="rfc">may</em> have a URI given as the value of the <code class="language-plaintext highlighter-rouge">@id</code> property.</p>

<p>An example request:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-plaintext urltemplate highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.org/service/manifest/search?q=bird
</code></pre></div></div>

<p>And the response for the first page of annotations from a total of 125 matches:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:</span><span class="s2">"http://iiif.io/api/presentation//context.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=bird&amp;page=1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"within"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:Layer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">125</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/manifest/search?q=bird&amp;page=1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/search?q=bird&amp;page=13"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/search?q=bird&amp;page=2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"startIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno-line"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"motivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:painting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnt:ContentAsText"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chars"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A bird in the hand is worth two in the bush"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/canvas1#xywh=100,100,250,20"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further annotations from the first page here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h4 id="target-resource-structure">
        
        
          3.3.3. Target Resource Structure <a href="#target-resource-structure">#</a>
        
        
      </h4>
    

<p>The annotations may also include references to the structure or structures that the target (the resource in the <code class="language-plaintext highlighter-rouge">on</code> property) is found within.  The URI and type of the including resource <em class="rfc">must</em> be given, and a <code class="language-plaintext highlighter-rouge">label</code> <em class="rfc">should</em> be included.</p>

<p>This structure is called out explicitly as although it uses only properties from the Presentation API, it is not a common pattern and thus clients may not be expecting it.</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:</span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=bird&amp;motivation=painting"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno-line"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"motivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:painting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnt:ContentAsText"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chars"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A bird in the hand is worth two in the bush"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"on"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/canvas1#xywh=100,100,250,20"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"within"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/manifest"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:Manifest"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Manifest"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further annotations here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h3 id="search-api-specific-responses">
        
        
          3.4 Search API Specific Responses <a href="#search-api-specific-responses">#</a>
        
        
      </h3>
    

<p>There may be properties that are specific to the search result, and not features of the annotation in general, that are valuable to return to the client.  Examples of such properties include the text before and after the matched content (to allow a result snippet to be presented), the matched text itself (when case normalization, stemming or wildcards have been applied), and a reference to the set of annotations that together fulfill the search query (when a phrase spans across multiple annotations).</p>

<p>As these responses include Search specific information, the value of <code class="language-plaintext highlighter-rouge">@context</code> <em class="rfc">must</em> be an array with both the Presentation API and the Search API context URIs included, in that order.  This allows the two APIs to develop separately and yet remain as synchronized as possible.</p>

<p>To incrementally build upon existing solutions and provide graceful degradation for clients that do not support these features and retain compatibility with the Presentation API, the search API specific information is included in a second list within the annotation list called <code class="language-plaintext highlighter-rouge">hits</code>, other than the <code class="language-plaintext highlighter-rouge">ignored</code> property on the layer.  Annotation lists <em class="rfc">may</em> have this property, and servers <em class="rfc">may</em> support these features.</p>

<p>If supported, each entry in the <code class="language-plaintext highlighter-rouge">hits</code> list is a <code class="language-plaintext highlighter-rouge">search:Hit</code> object.  This type must be included as the value of the <code class="language-plaintext highlighter-rouge">@type</code> property. Hit objects reference one or more annotations that they provide additional information for, in a list as the value of the hit’s <code class="language-plaintext highlighter-rouge">annotations</code> property.  The reference is made to the value of the <code class="language-plaintext highlighter-rouge">@id</code> property of the annotation, and thus annotations <em class="rfc">must</em> have a URI to enable this further information.</p>

<p>The basic structure is:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:[</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/presentation//context.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=bird&amp;page=1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"within"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:Layer"</span><span class="w">
    </span><span class="c1">// Result set information here ...</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="w">
      </span><span class="c1">// More regular annotation information here ...</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further annotations from the first page here ...</span><span class="w">
  </span><span class="p">],</span><span class="w">

  </span><span class="nl">"hits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search:Hit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"http://example.org/identifier/annotation/anno1"</span><span class="w">
      </span><span class="p">]</span><span class="w">
      </span><span class="c1">// More search specific information for anno1 here ...</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further hits for the first page here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h4 id="ignored-parameters">
        
        
          3.4.1. Ignored Parameters <a href="#ignored-parameters">#</a>
        
        
      </h4>
    

<p>If the server has ignored any of the parameters in the request, then the layer <em class="rfc">must</em> be present and <em class="rfc">must</em> have an <code class="language-plaintext highlighter-rouge">ignored</code> property where the value is a list of the ignored parameters.</p>

<p>If the request from previous examples had been:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-plaintext urltemplate highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.org/service/manifest/search?q=bird&amp;user=http%3A%2F%2Fexample.com%2Fusers%2Fazaroth42
</code></pre></div></div>

<p>And the user parameter was ignored when processing the request, the response would be:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:[</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/presentation//context.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=bird&amp;page=1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"within"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:Layer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">125</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ignored"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user"</span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/search?q=bird&amp;page=2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"startIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="c1">// Annotations ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h4 id="search-term-snippets">
        
        
          3.4.2. Search Term Snippets <a href="#search-term-snippets">#</a>
        
        
      </h4>
    

<p>The simplest addition to the hit object is to add text that appears before and after the matching text in the annotation.  This allows the client to construct a snippet where the matching text is provided in the context of surrounding content, rather than simply by itself.  This is most useful when the service has word-level boundaries of the text on the canvas, such as are available when Optical Character Recognition (OCR) has been used to generate the text positions.</p>

<p>The service <em class="rfc">may</em> add a <code class="language-plaintext highlighter-rouge">before</code> property to the hit with some amount of text that appears before the content of the annotation (given in <code class="language-plaintext highlighter-rouge">chars</code>), and <em class="rfc">may</em> also add an <code class="language-plaintext highlighter-rouge">after</code> property with some amount of text that appears after the content of the annotation.</p>

<p>For example, in a search for the query term “bird” in our example sentence, when the server has full word level coordinates:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-plaintext urltemplate highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.org/service/manifest/search?q=bird
</code></pre></div></div>

<p>That the server matches against the plural “birds”:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:[</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/presentation//context.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=bird"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno-bird"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"motivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:painting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnt:ContentAsText"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chars"</span><span class="p">:</span><span class="w"> </span><span class="s2">"birds"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/canvas1#xywh=200,100,40,20"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further annotations here ...</span><span class="w">
  </span><span class="p">],</span><span class="w">

  </span><span class="nl">"hits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search:Hit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"http://example.org/identifier/annotation/anno-bird"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"before"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There are two "</span><span class="p">,</span><span class="w">
      </span><span class="nl">"after"</span><span class="p">:</span><span class="w"> </span><span class="s2">" in the bush"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further hits for the first page here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h4 id="search-term-highlighting">
        
        
          3.4.3. Search Term Highlighting <a href="#search-term-highlighting">#</a>
        
        
      </h4>
    

<p>Many systems do not have full word-level coordinate information, and are restricted to line or paragraph level boundaries.  In this case the most useful thing that the client can do is to display the entire annotation and highlight the hits within it.  This is similar, but different, to the previous use case.  Here the word will appear somewhere within the <code class="language-plaintext highlighter-rouge">chars</code> property of the annotation, and the client needs to make it more prominent.  In the previous situation, the word was the entire content of the annotation, and the information was convenient for presenting it in a list.</p>

<p>The client in this case needs to know the text that caused the service to create the hit, and enough information about where it occurs in the content to reliably highlight it and not highlight non-matches.  To do this, the service can supply text before and after the matching term within the content of the annotation, via an <a href="http://www.openannotation.org/spec/core/">Open Annotation</a> <code class="language-plaintext highlighter-rouge">TextQuoteSelector</code> object.  TextQuoteSelectors have three properties: <code class="language-plaintext highlighter-rouge">exact</code> to record the exact text to look for, <code class="language-plaintext highlighter-rouge">prefix</code> with some text before the match, and <code class="language-plaintext highlighter-rouge">suffix</code> with some text after the match.</p>

<p>This would look like:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:TextQuoteSelector"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exact"</span><span class="p">:</span><span class="w"> </span><span class="s2">"birds"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There are two "</span><span class="p">,</span><span class="w">
  </span><span class="nl">"suffix"</span><span class="p">:</span><span class="w"> </span><span class="s2">" in the bush"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>As multiple words might match the query within the same annotation, multiple selectors may be given in the hit as objects within a <code class="language-plaintext highlighter-rouge">selectors</code> property.  For example, if the search used a wildcard to search for all words starting with “b” it would match the same annotation twice:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-plaintext urltemplate highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.org/service/manifest/search?q=b*
</code></pre></div></div>

<p>The result might be:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:[</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/presentation//context.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=b*&amp;page=1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno-line"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"motivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:painting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnt:ContentAsText"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chars"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There are two birds in the bush."</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/canvas1#xywh=200,100,40,20"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further annotations here ...</span><span class="w">
  </span><span class="p">],</span><span class="w">

  </span><span class="nl">"hits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search:Hit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"http://example.org/identifier/annotation/anno-line"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"selectors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:TextQuoteSelector"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"exact"</span><span class="p">:</span><span class="w"> </span><span class="s2">"birds"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There are two "</span><span class="p">,</span><span class="w">
          </span><span class="nl">"suffix"</span><span class="p">:</span><span class="w"> </span><span class="s2">" in the bush"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:TextQuoteSelector"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"exact"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bush"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"two birds in the "</span><span class="p">,</span><span class="w">
          </span><span class="nl">"suffix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="w">
        </span><span class="p">}</span><span class="w">        
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further hits for the first page here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h4 id="multi-annotations-hits">
        
        
          3.4.4. Multi-Annotations Hits <a href="#multi-annotations-hits">#</a>
        
        
      </h4>
    

<p>Given the flexibility of alignment between the sections of the text (such as word, line, paragraph, page, or arbitrary sections) and the annotations that expose that text to the client, there may be multiple annotations that match a single multi-term search. These differences will depend primarily on the method by which the text and annotations were generated and will likely be very different for manually transcribed texts and text that it is generated by OCR.</p>

<p>For example, imagine that the annotations are divided up line by line, as they were manually transcribed that way, and there are two lines of text. In this example the first line is “A bird in the hand”, the second line is “is worth two in the bush”, and the search is for the phrase “hand is”. Therefore the match spans both of the line-based annotations.  If the annotations were instead at word level, then all phrase searches would require multiple annotations.</p>

<p>In cases like this there are more annotations than hits as two or more annotations are needed to make up one hit.  The <code class="language-plaintext highlighter-rouge">match</code> property of the hit captures the text across the annotations.</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:[</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/presentation//context.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="s2">"http://example.org/service/manifest/search?q=hand+is"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="s2">"sc:AnnotationList"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno-bird"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"motivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:painting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnt:ContentAsText"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chars"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A bird in the hand"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/canvas1#xywh=200,100,150,30"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/annotation/anno-are"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oa:Annotation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"motivation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sc:painting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnt:ContentAsText"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chars"</span><span class="p">:</span><span class="w"> </span><span class="s2">"is worth two in the bush"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/identifier/canvas1#xywh=200,140,170,30"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further annotations here ...</span><span class="w">
  </span><span class="p">],</span><span class="w">

  </span><span class="nl">"hits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search:Hit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"http://example.org/identifier/annotation/anno-bush"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"http://example.org/identifier/annotation/anno-are"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"match"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hand is"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"before"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A bird in the "</span><span class="p">,</span><span class="w">
      </span><span class="nl">"after"</span><span class="p">:</span><span class="w"> </span><span class="s2">" worth two in the bush"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1">// Further hits for the first page here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h2 id="autocomplete">
        
        
          4. Autocomplete <a href="#autocomplete">#</a>
        
        
      </h2>
    

<p>The autocomplete service returns terms that can be added into the <code class="language-plaintext highlighter-rouge">q</code> parameter of the related search service, given the first characters of the term.</p>
      <h3 id="service-description-1">
        
        
          4.1. Service Description <a href="#service-description-1">#</a>
        
        
      </h3>
    

<p>The autocomplete service is nested within the search service that it provides term completion for.  This is to allow multiple search services, each with their own autocomplete service.</p>

<p>The autocomplete service <em class="rfc">must</em> have an <code class="language-plaintext highlighter-rouge">@id</code> property with the value of the URI where the service can be interacted with, and <em class="rfc">must</em> have a <code class="language-plaintext highlighter-rouge">profile</code> property with the value “http://iiif.io/api/search/1/autocomplete” to distinguish it from other types of service.</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="c1">// Resource that the services are associated with ...</span><span class="w">
  </span><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/services/identifier/search"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iiif.io/api/search/1/search"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/services/identifier/autocomplete"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iiif.io/api/search/1/autocomplete"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h3 id="request">
        
        
          4.2. Request <a href="#request">#</a>
        
        
      </h3>
    

<p>The request is very similar to the search request, with one additional parameter to allow the number of occurrences of the term within the object to be constrained.  The value of the <code class="language-plaintext highlighter-rouge">q</code> parameter, which is <em class="rfc">required</em> for the autocomplete service, is the beginning characters from the term to be completed by the service.  For example, the query term of ‘bir’ might complete to ‘bird’, ‘biro’, ‘birth’, and ‘birthday’.</p>

<p>The term should be parsed as a complete string, regardless of whether there is whitespace included in it. For example, the query term of “green bir” should not autocomplete on fields that match “green” and also include something that starts with “bir”, but instead look for terms that start with the string “green bir”.</p>

<p>The other parameters (<code class="language-plaintext highlighter-rouge">motivation</code>, <code class="language-plaintext highlighter-rouge">date</code> and <code class="language-plaintext highlighter-rouge">user</code>), if supported, refine the set of terms in the response to only ones from the annotations that match those filters.  For example, if the motivation is given as “painting”, then only text from painting transcriptions will contribute to the list of terms in the response.</p>
      <h4 id="query-parameters-1">
        
        
          4.2.1. Query Parameters <a href="#query-parameters-1">#</a>
        
        
      </h4>
    

<table class="api-table">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min</code></td>
      <td>The minimum number of occurrences for a term in the index in order for it to appear within the response ; default is 1 if not present.  Support for this parameter is <em class="rfc">optional</em></td>
    </tr>
  </tbody>
</table>
      <h4 id="example-request-1">
        
        
          4.2.2. Example Request <a href="#example-request-1">#</a>
        
        
      </h4>
    

<p>An example request</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-plaintext urltemplate highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.org/service/identifier/autocomplete?q=bir&amp;motivation=painting&amp;user=http%3A%2F%2Fexample.com%2Fusers%2Fazaroth42
</code></pre></div></div>
      <h3 id="response">
        
        
          4.3. Response <a href="#response">#</a>
        
        
      </h3>
    

<p>The response is a list (a “search:TermList”) of simple objects that include the term, a link to the search for that term, and the number of matches that search will have.  The number of terms provided in the list is determined by the server.</p>

<p>Parameters that were not processed by the service <em class="rfc">must</em> be returned in the <code class="language-plaintext highlighter-rouge">ignored</code> property of the main “TermList” object.  The value <em class="rfc">must</em> be an array of strings.</p>

<p>The objects in the list of terms are all of <code class="language-plaintext highlighter-rouge">@type</code> “search:Term”, and this <em class="rfc">may</em> be included explicitly but is not necessary.  The Term object has a number of possible properties:</p>

<ul>
  <li>The matching term is given as the value of the <code class="language-plaintext highlighter-rouge">match</code> property, and <em class="rfc">must</em> be present.</li>
  <li>The link to the search to perform is the value of the <code class="language-plaintext highlighter-rouge">url</code> property, and this <em class="rfc">must</em> be present.</li>
  <li>The number of matches for the term is the integer value of the <code class="language-plaintext highlighter-rouge">count</code> property, and <em class="rfc">should</em> be present.</li>
  <li>A label to display instead of the match can be given as the value of the <code class="language-plaintext highlighter-rouge">label</code> property, and <em class="rfc">may</em> be present.  There may be more than one label given, to allow for internationalization.</li>
</ul>

<p>The terms <em class="rfc">should</em> be provided in ascending alphabetically sorted order, but other orders are allowed, such as by the term’s count descending to put the most common matches first.</p>

<p>The example request above might generate the following response:</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/autocomplete?q=bir&amp;motivation=painting"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"search:TermList"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ignored"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"match"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bird"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/search?motivation=painting&amp;q=bird"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"match"</span><span class="p">:</span><span class="w"> </span><span class="s2">"biro"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/search?motivation=painting&amp;q=biro"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"match"</span><span class="p">:</span><span class="w"> </span><span class="s2">"birth"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/search?motivation=painting&amp;q=birth"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"match"</span><span class="p">:</span><span class="w"> </span><span class="s2">"birthday"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/search?motivation=painting&amp;q=birthday"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>It is also possible to associate one or more <code class="language-plaintext highlighter-rouge">label</code>s to display to the user with URIs or other data that are searchable via the <code class="language-plaintext highlighter-rouge">q</code> parameter, rather than using the exact string that matched.  This can also be useful if stemming or other term normalization has occurred, in order to display the original rather than the processed term.</p>

<script src="/iiif-website/assets/js/copyCodeBlock.js"></script>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-json-doc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iiif.io/api/search/1/context.json"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/autocomplete?q=http%3A%2F%2Fsemtag.example.org%2Ftag%2Fb&amp;motivation=tagging"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ignored"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"match"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://semtag.example.org/tag/bird"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/autocomplete?motivation=tagging&amp;q=http%3A%2F%2Fsemtag.example.org%2Ftag%2Fbird"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bird"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"match"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://semtag.example.org/tag/biro"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/service/identifier/autocomplete?motivation=tagging&amp;q=http%3A%2F%2Fsemtag.example.org%2Ftag%2Fbiro"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"biro"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
      <h2 id="property-definitions">
        
        
          5. Property Definitions <a href="#property-definitions">#</a>
        
        
      </h2>
    

<dl>
  <dt>after</dt>
  <dd>The segment of text that occurs after the text that triggered the search to match the particular annotation.  The value <em class="rfc">must</em> be a single string.

    <ul>
      <li>A Hit <em class="rfc">may</em> have the <code class="language-plaintext highlighter-rouge">after</code> property.</li>
    </ul>
  </dd>
  <dt>before</dt>
  <dd>The segment of text that occurs before the text that triggered the search to match the particular annotation.  The value <em class="rfc">must</em> be a single string.

    <ul>
      <li>A Hit <em class="rfc">may</em> have the <code class="language-plaintext highlighter-rouge">before</code> property.</li>
    </ul>
  </dd>
  <dt>count</dt>
  <dd>The number of times that the term appears.  The value <em class="rfc">must</em> be an positive integer.

    <ul>
      <li>A Term <em class="rfc">should</em> have the <code class="language-plaintext highlighter-rouge">count</code> property.</li>
    </ul>
  </dd>
  <dt>ignored</dt>
  <dd>The set of parameters that were received by the server but not taken into account when processing the query. The value <em class="rfc">must</em> be an array of strings.

    <ul>
      <li>A TermList or a Layer <em class="rfc">may</em> have an ignored property, and <em class="rfc">must</em> have it if the server ignored any query parameter.</li>
    </ul>
  </dd>
  <dt>match</dt>
  <dd>The text that triggered the search to match the particular annotation.  The value <em class="rfc">must</em> be a single string.

    <ul>
      <li>A Hit <em class="rfc">may</em> have the <code class="language-plaintext highlighter-rouge">match</code> property.</li>
      <li>A Term <em class="rfc">must</em> have the <code class="language-plaintext highlighter-rouge">match</code> property.</li>
    </ul>
  </dd>
</dl>
      <h2 id="appendices">
        
        
          Appendices <a href="#appendices">#</a>
        
        
      </h2>
    
      <h3 id="a-request-parameter-requirements">
        
        
          A. Request Parameter Requirements <a href="#a-request-parameter-requirements">#</a>
        
        
      </h3>
    

<table class="api-table">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Required in Request</th>
      <th>Required in Search</th>
      <th>Required in Autocomplete</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">q</code></td>
      <td>recommended</td>
      <td>recommended</td>
      <td>mandatory</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">motivation</code></td>
      <td>optional</td>
      <td>recommended</td>
      <td>optional</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">date</code></td>
      <td>optional</td>
      <td>optional</td>
      <td>optional</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">uri</code></td>
      <td>optional</td>
      <td>optional</td>
      <td>optional</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">min</code></td>
      <td>optional</td>
      <td>n/a</td>
      <td>optional</td>
    </tr>
  </tbody>
</table>
      <h3 id="b-versioning">
        
        
          B. Versioning <a href="#b-versioning">#</a>
        
        
      </h3>
    

<p>This specification follows <a href="http://semver.org/spec/v2.0.0.html" title="Semantic Versioning 2.0.0">Semantic Versioning</a>. See the note <a href="/iiif-website/api/annex/notes/semver/" title="Versioning of APIs">Versioning of APIs</a> for details regarding how this is implemented.</p>
      <h3 id="c-acknowledgements">
        
        
          C. Acknowledgements <a href="#c-acknowledgements">#</a>
        
        
      </h3>
    

<p>The production of this document was generously supported by a grant from the <a href="http://www.mellon.org/" title="The Andrew W. Mellon Foundation">Andrew W. Mellon Foundation</a>.</p>

<p>Many thanks to the members of the <a href="/community/" title="IIIF Community">IIIF</a> for their continuous engagement, innovative ideas and feedback.</p>
      <h3 id="d-change-log">
        
        
          D. Change Log <a href="#d-change-log">#</a>
        
        
      </h3>
    

<table class="api-table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2016-05-12</td>
      <td>Version 1.0 (Lost Summer)</td>
    </tr>
    <tr>
      <td>2015-07-20</td>
      <td>Version 0.9 (Trip Life)</td>
    </tr>
  </tbody>
</table>

    </div>
  </div>
</div>

    </section>
<footer id="footer" class="footer">
  <div class="container">
    <div class="columns">

      <div class="navbar-brand column is-half">
        <a class="navbar-item" href="/iiif-website/">
          <img src="/iiif-website/assets/images/logo-sm.png" alt="International Image Interoperability Framework logo" height="28">
          <span class="brand-title blue-text">International Image Interoperability Framework</span>
        </a>
        <p>International Image Interoperability Framework: A community driven image framework with well defined APIs for making the world’s image repositories interoperable and accessible</p>
      </div>
      <div class="column"></div>
      
      <div class="column menu-column">
        <h4>About</h4>
        <ul>
        
          <li>
            <a href="/iiif-website">How It Works</a>
          </li>
        
          <li>
            <a href="/iiif-website/api">Documentation</a>
          </li>
        
          <li>
            <a href="/iiif-website">Demos</a>
          </li>
        
          <li>
            <a href="/iiif-website">Tutorials</a>
          </li>
        
        </ul>
      </div>
      
      <div class="column menu-column">
        <h4>Stay Connected</h4>
        <ul>
        
          <li>
            <a href="/iiif-website">Events & News</a>
          </li>
        
          <li>
            <a href="/iiif-website">Join Newsletter</a>
          </li>
        
          <li>
            <a href="/iiif-website">Community Groups</a>
          </li>
        
          <li>
            <a href="/iiif-website">Consortium</a>
          </li>
        
        </ul>
      </div>
      
    </columns>
  </div>
</footer>
</body>
</html>
